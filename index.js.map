{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load-more-button');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n    const markup = images\n    .map(\n        ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"> \n            </a>\n            <div class=\"gallery-bottom-wrapper\">\n                <div class=\"gallery-inner-wrapper\">\n                    <p class=\"gallery-wrapper-title\">Likes</p>\n                    <p class=\"gallery-wrapper-value\">${likes}</p>\n                    </div>\n                    <div class=\"gallery-inner-wrapper\">\n                        <p class=\"gallery-wrapper-title\">Views</p>\n                        <p class=\"gallery-wrapper-value\">${views}</p>\n                        </div>\n                        <div class=\"gallery-inner-wrapper\">\n                            <p class=\"gallery-wrapper-title\">Comments</p>\n                            <p class=\"gallery-wrapper-value\">${comments}</p>\n                            </div>\n                            <div class=\"gallery-inner-wrapper\">\n                                <p class=\"gallery-wrapper-title\">Downloads</p>\n                                <p class=\"gallery-wrapper-value\">${downloads}</p>\n                                </div>\n                                </div>\n                                </li>`\n    )\n    .join('');\n    galleryList.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    }\n    export function clearGallery() {\n    galleryList.innerHTML = '';\n    }\n    export function showLoader() {\n    loader.classList.remove('hiden');\n    }\n    export function hideLoader() {\n    loader.classList.add('hiden');\n    }\n    export function showLoadMoreButton() {\n    loadButton.classList.remove('hiden');\n    }\n    export function hideLoadMoreButton() {\n    loadButton.classList.add('hiden');\n}","import axios from 'axios';\n\nconst BASEURL = 'https://pixabay.com/api/';\nconst API = '54348256-4fe7e6271296be96900661c2d';\nexport const PER_PAGE = 15;\n\n    export async function getImagesByQuery(query, page) {\n    const { data } = await axios.get(BASEURL, {\n    params: {\n        key: API,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: PER_PAGE,\n    },\n    });\n    return data;\n    }","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\ncreateGallery,\nclearGallery,\nshowLoader,\nhideLoader,\nshowLoadMoreButton,\nhideLoadMoreButton,\n} from './js/render-functions';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport { PER_PAGE } from './js/pixabay-api';\n\nconst form = document.querySelector('form');\nconst userInput = document.querySelector('input');\nconst loadMoreButton = document.querySelector('.load-more-button');\n\nlet page = 1;\nlet currentQuery = '';\nlet reachedEnd = false;\n\nform.addEventListener('submit', handleFormSubmit);\nloadMoreButton.addEventListener('click', handleLoadMore);\n\nasync function handleFormSubmit(event) {\nevent.preventDefault();\n\nconst newQuery = userInput.value.trim();\n\nif (!newQuery) {\n    iziToast.info({\n    message: 'Введіть запит для пошуку зображень',\n    });\n    return;\n}\n\nif (newQuery === currentQuery) {\n    return;\n}\n\ncurrentQuery = newQuery;\npage = 1;\nreachedEnd = false;\n\nclearGallery();\nhideLoadMoreButton();\nawait renderGallery();\n}\n\nasync function handleLoadMore() {\npage += 1;\nhideLoadMoreButton(); // ховаємо одразу\nawait renderGallery();\n}\n\nasync function renderGallery() {\nshowLoader();\n\ntry {\n    const response = await getImagesByQuery(currentQuery, page);\n    const { hits, totalHits } = response;\n\n    if (hits.length === 0) {\n    if (page === 1) {\n        iziToast.warning({\n        message: 'За вашим запитом нічого не знайдено. Спробуйте інший запит.',\n        });\n    }\n    reachedEnd = true;\n    hideLoadMoreButton();\n    return;\n    }\n\n    createGallery(hits);\n\n    if (page > 1) {\n    smoothScroll();\n    }\n\n    if (PER_PAGE * page >= totalHits) {\n    reachedEnd = true;\n    hideLoadMoreButton();\n    iziToast.info({\n        message: \"Ви дійшли до кінця результатів пошуку.\",\n    });\n    } else {\n    showLoadMoreButton();\n    }\n} catch (error) {\n    console.error(error);\n\n    let message = 'Щось пішло не так. Спробуйте ще раз пізніше.';\n\n    // обробка помилок для axios\n    if (error.response) {\n    \n    const status = error.response.status;\n    if (status === 400) message = 'Некоректний запит';\n    else if (status === 401 || status === 403) message = 'Помилка авторизації (перевірте API ключ)';\n    else if (status === 429) message = 'Забагато запитів. Зачекайте трохи';\n    else if (status >= 500) message = 'Проблема на стороні Pixabay';\n    } else if (error.request) {\n    message = 'Немає відповіді від сервера. Перевірте інтернет-з’єднання.';\n    }\n\n    iziToast.error({\n    message,\n    timeout: 4000,\n    });\n\n    hideLoadMoreButton();\n} finally {\n    hideLoader();\n}\n}\n\nfunction smoothScroll() {\nconst galleryItem = document.querySelector('.gallery-item');\nif (!galleryItem) return;\n\nconst { height: cardHeight } = galleryItem.getBoundingClientRect();\n\nwindow.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n});\n}"],"names":["galleryList","loader","loadButton","lightbox","SimpleLightbox","createGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","BASEURL","API","PER_PAGE","getImagesByQuery","query","page","data","axios","form","userInput","loadMoreButton","currentQuery","reachedEnd","handleFormSubmit","handleLoadMore","event","newQuery","iziToast","renderGallery","response","hits","totalHits","smoothScroll","error","message","status","galleryItem","cardHeight"],"mappings":"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"}